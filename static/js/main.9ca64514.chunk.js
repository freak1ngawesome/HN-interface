(this.webpackJsonphacker_news=this.webpackJsonphacker_news||[]).push([[0],{192:function(e,t,c){"use strict";c.r(t);var r=c(2),n=c(0),s=c(58),i=c.n(s),a=c(6),j=c(51),d=c(219),o=c(203),b=c(204),h=c(205),x=c(206),l=c(222),u=c(208),O=c(207),p=c(209),g=c(210),f=c(211),m=c(115),w=c(15),v=Object(m.a)({reducerPath:"newsApi",baseQuery:Object(w.d)({baseUrl:"https://hacker-news.firebaseio.com/v0/"}),tagTypes:["lastNews","newsById"],keepUnusedDataFor:120,endpoints:function(e){return{getLastNewsIds:e.query({query:function(){return'newstories.json?print=pretty&orderBy="$key"&limitToFirst=100'},providesTags:["lastNews"]}),getNewsDataById:e.query({query:function(e){return"item/".concat(e,".json?print=pretty")},providesTags:["newsById"]})}}}),y=v.useGetLastNewsIdsQuery,k=v.useGetNewsDataByIdQuery;function F(e){return new Date(1e3*e).toLocaleString()}function E(e){var t=e.id,c=e.isFetching,n=k(t,{refetchOnReconnect:!0,refetchOnMountOrArgChange:!0}),s=n.data,i=n.isLoading,a=n.refetch,m=n.isError;return c&&a(),i?Object(r.jsx)(d.a,{height:"90px"}):m?Object(r.jsx)(o.a,{height:"90px",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}):s&&Object(r.jsxs)(b.b,{p:5,shadow:"md",borderWidth:"1px",spacing:"5px",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(x.a,{size:"md",children:Object(r.jsx)(j.b,{to:{pathname:"/news/".concat(t),state:{newsId:t}},children:s.title})})}),Object(r.jsxs)(l.a,{children:[Object(r.jsx)(O.a,{}),Object(r.jsx)(u.a,{children:s.score}),Object(r.jsx)(p.a,{}),Object(r.jsx)(u.a,{children:F(s.time)}),Object(r.jsx)(g.a,{}),Object(r.jsx)(u.a,{children:s.by}),Object(r.jsx)(f.a,{}),Object(r.jsx)(u.a,{children:s.descendants})]})]})}var I=Object(n.memo)(E),L=c(223);var W=function(){return Object(r.jsx)(o.a,{color:"red.500",size:"xl",children:Object(r.jsx)(L.a,{})})},z=c(218),B=c(212);var H=function(){var e=y(),t=e.data,c=e.isLoading,s=e.isFetching,i=e.isError,j=e.refetch,d=Object(n.useState)(10),x=Object(a.a)(d,2),l=x[0],u=x[1];function O(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&u((function(e){return e+10>100?100:e+10}))}return Object(n.useEffect)((function(){return document.addEventListener("scroll",O),function(){return document.removeEventListener("scroll",O)}}),[]),i?Object(r.jsx)(o.a,{height:"100px",children:"\u041e\u0448\u0438\u0431\u043a\u0430"}):c?Object(r.jsx)(W,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.a,{p:5,shadow:"md",borderWidth:"1px",mb:"20px",children:Object(r.jsx)(z.a,{"aria-label":"Refresh",icon:Object(r.jsx)(B.a,{}),onClick:function(){j()}})}),Object(r.jsx)(b.a,{spacing:"5px",children:t.slice(0,l).map((function(e){return Object(r.jsx)(I,{id:e,isFetching:s},e)}))})]})},N=c(67);function S(e){var t=e.id,c=e.isFetching,n=k(t),s=n.data,i=n.isLoading,a=n.refetch;if(c&&a(),i)return Object(r.jsx)(d.a,{height:"30px"});var j=new N.Parser;return s&&Object(r.jsxs)(b.b,{p:5,shadow:"md",borderWidth:"1px",bg:"gray.200",children:[Object(r.jsxs)(x.a,{size:"sm",children:[s.by," : ",F(s.time)]}),Object(r.jsx)(u.a,{size:"sm",children:j.parse(s.text)}),s.kids&&Object(r.jsx)(b.a,{children:s.kids.map((function(e){return Object(r.jsx)(S,{id:e,isFetching:c},e)}))})]})}var D=Object(n.memo)(S),C=c(213);var T=function(e){var t=e.id,c=e.isFetching,s=Object(n.useState)(!1),i=Object(a.a)(s,2),j=i[0],o=i[1],h=k(t),l=h.data,O=h.isLoading,p=h.refetch;c&&p();var g=new N.Parser;return O?Object(r.jsx)(d.a,{height:"60px"}):l&&Object(r.jsxs)(b.b,{p:5,shadow:"md",borderWidth:"1px",children:[Object(r.jsxs)(x.a,{size:"sm",children:[l.by," : ",F(l.time)]}),Object(r.jsx)(u.a,{as:"div",size:"sm",children:g.parse(l.text)}),l.kids&&Object(r.jsx)(C.a,{onClick:function(){o(!j)},children:j?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),j&&Object(r.jsx)(b.a,{children:l.kids.map((function(e){return Object(r.jsx)(D,{id:e,isFetching:c},e)}))})]})},q=c(214),G=c(215),M=c(216),P=c(13);function Q(){var e=Object(P.g)().id,t=k(e),c=t.data,n=t.isLoading,s=t.isFetching,i=t.refetch;y().isFetching&&i();var a=Object(P.f)();return n?Object(r.jsx)(W,{}):Object(r.jsxs)(h.a,{children:[Object(r.jsxs)(q.a,{p:5,shadow:"md",borderWidth:"1px",mb:"20px",gridGap:"5px",children:[Object(r.jsx)(x.a,{size:"lg",children:c.title}),Object(r.jsx)(G.a,{}),Object(r.jsxs)(l.a,{children:[Object(r.jsx)(z.a,{"aria-label":"Go back",icon:Object(r.jsx)(M.a,{}),onClick:function(){a.goBack()}}),Object(r.jsx)(z.a,{"aria-label":"Refresh",icon:Object(r.jsx)(B.a,{}),onClick:function(){i()}})]})]}),Object(r.jsxs)(h.a,{p:5,shadow:"md",borderWidth:"1px",spacing:"5px",children:[Object(r.jsxs)(u.a,{children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",c.score]}),Object(r.jsxs)(u.a,{children:["\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f: ",F(c.time)]}),Object(r.jsxs)(u.a,{children:["\u0410\u0432\u0442\u043e\u0440: ",c.by]}),Object(r.jsxs)(u.a,{children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: ",c.descendants]}),c.url&&Object(r.jsx)(C.a,{href:c.url,color:"teal.500",isExternal:!0,children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"})]}),c.kids&&Object(r.jsx)(b.a,{children:c.kids.map((function(e){return Object(r.jsx)(T,{id:e,isFetching:s},e)}))})]})}var R=Object(n.memo)(Q);function A(){var e=new Date;return{h:e.getHours()<10?"0"+e.getHours():e.getHours(),m:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()}}var J=function(){var e=Object(n.useState)(A()),t=Object(a.a)(e,2),c=t[0],s=t[1];Object(n.useEffect)((function(){var e=setInterval((function(){s(A())}),1e3);return function(){return clearInterval(e)}}),[]);var i=y().refetch;return Object(n.useEffect)((function(){i()}),[c.m,i]),Object(r.jsx)(o.a,{as:"header",height:"120px",bg:"gray.200",mb:"20px",p:5,shadow:"md",borderWidth:"1px",children:Object(r.jsxs)(l.b,{children:[Object(r.jsx)(x.a,{size:"lg",children:"Hacker News"}),Object(r.jsxs)(u.a,{children:[c.h," : ",c.m," : ",c.s]})]})})};var U=function(){return Object(r.jsx)(o.a,{as:"footer",height:"40px",p:5,bg:"gray.200",shadow:"md",borderWidth:"1px",children:Object(r.jsx)(C.a,{href:"https://github.com/freak1ngawesome",isExternal:!0,children:"@freak1ngawesome"})})},_=c(217);var $=function(){return Object(r.jsx)(j.a,{children:Object(r.jsxs)(_.a,{maxW:"1000px",d:"flex",flexDirection:"column",minH:"100vh",children:[Object(r.jsx)(J,{}),Object(r.jsx)(h.a,{as:"main",flex:"1",children:Object(r.jsxs)(P.c,{children:[Object(r.jsx)(P.a,{path:"/news/:id",component:R}),Object(r.jsx)(P.a,{path:"/",component:H})]})}),Object(r.jsx)(U,{})]})})},K=c(220),V=c(17),X=c(3),Y=c(4),Z=Object(Y.a)({reducer:Object(X.a)({},v.reducerPath,v.reducer),middleware:function(e){return e().concat(v.middleware)}});Object(w.e)(Z.dispatch),i.a.render(Object(r.jsx)(V.a,{store:Z,children:Object(r.jsx)(K.a,{children:Object(r.jsx)($,{})})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.9ca64514.chunk.js.map